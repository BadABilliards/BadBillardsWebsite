"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2382],{81920:function(e,t,s){s.d(t,{$H:function(){return a},Gb:function(){return n},H8:function(){return i},mp:function(){return r}});var n=function(e){if(!e)return 0;var t=e.split("supabase-postgres-"),s=t[t.length-1].split("-")[0];return Number(s.split(".").join(""))},i=function(e){return[{id:void 0,name:"Micro Add-on",metadata:{default_price_id:void 0,supabase_prod_id:"addon_instance_micro",features:"2-core ARM (shared) \u2022 1GB memory \u2022 2,606Mbps Disk IO"},prices:[{id:void 0,currency:"usd",recurring:{interval:"month",usage_type:"licensed",interval_count:1,aggregate_usage:null,trial_period_days:null},unit_amount:0}]}].concat(["addon_instance_small","addon_instance_medium","addon_instance_large","addon_instance_xlarge","addon_instance_xxlarge","addon_instance_4xlarge","addon_instance_8xlarge","addon_instance_12xlarge","addon_instance_16xlarge"].map((function(t){return e.find((function(e){return e.metadata.supabase_prod_id===t}))}))).filter((function(e){return void 0!==e}))},r=function(e){var t={id:void 0,name:"Disable PITR",metadata:{default_price_id:void 0,supabase_prod_id:"addon_pitr_0days",features:""},prices:[{id:void 0,currency:"usd",recurring:{interval:"month",usage_type:"licensed",interval_count:1,aggregate_usage:null,trial_period_days:null},unit_amount:0}]},s=["addon_pitr_7days","addon_pitr_14days","addon_pitr_28days"].map((function(t){return e.find((function(e){return e.metadata.supabase_prod_id===t}))})).filter((function(e){return void 0!==e}));return 0===s.length?[]:[t].concat(s)},a=function(e){var t={id:void 0,name:"Disable Custom Domains",metadata:{default_price_id:void 0,supabase_prod_id:"addon_custom_domains_disabled",features:""},prices:[{id:void 0,currency:"usd",recurring:{interval:"month",usage_type:"licensed",interval_count:1,aggregate_usage:null,trial_period_days:null},unit_amount:0}]},s=["addon_custom_domains"].map((function(t){return e.find((function(e){return e.metadata.supabase_prod_id===t}))})).filter((function(e){return void 0!==e}));return 0===s.length?[]:[t].concat(s)}},7831:function(e,t,s){var n=s(79894),i=s.n(n),r=s(47314),a=s(36802),o=s(24246);t.Z=function(e){var t=e.currentOption,s=(0,a.UO)().ref;return(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex items-center space-x-2",children:(0,o.jsx)("h4",{className:"text-lg",children:"Support Plan"})}),(0,o.jsx)("p",{className:"text-sm text-scale-1100",children:"Designated support with guaranteed response times"})]}),(0,o.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("h5",{className:"text-sm text-scale-1200",children:["Your project is currently on ",t.name]}),(0,o.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to change your support plan, do reach out to us"})]}),(0,o.jsx)("div",{className:"",children:(0,o.jsx)(i(),{href:"/support/new?ref=".concat(s,"&category=sales&subject=Change%20support%20plan"),children:(0,o.jsx)("a",{children:(0,o.jsx)(r.z,{children:"Contact us"})})})})]})]})}},64795:function(e,t,s){s.d(t,{K:function(){return d},Y:function(){return l}});var n=s(34789),i=s(85742),r=s(23753),a=s(4708),o=s(29324),c=s(24246),l=["Pricing","My project isn't getting traction","Poor customer service","Missing feature","I didn't see the value","Supabase didn't meet my needs","Dashboard is too complicated","Postgres is too complicated","Problem not solved","Bug issues","I decided to use something else","My work has finished/discontinued","I\u2019m migrating to/starting a new project","None of the above"],d=[{title:"Database",icon:(0,c.jsx)(n.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"db_size",attribute:"total_db_size_bytes",title:"Database size",units:"bytes",costPerUnit:.125,tooltip:(0,c.jsxs)("span",{children:["Billing is based on the average daily database size in GB throughout the billing period."," ",(0,c.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage",target:"_blank",rel:"noreferrer",children:"Docs"})]})},{key:"db_egress",attribute:"total_egress_modified",title:"Database egress",units:"bytes",costPerUnit:.09,tooltip:(0,c.jsx)("span",{children:"Database egress contains any outgoing traffic (egress) from your database. Billing is based on the total sum of egress in GB throughout your billing period."})}]},{title:"Auth",icon:(0,c.jsx)(i.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"monthly_active_users",attribute:"total_auth_billing_period_mau",title:"Monthly Active Users",units:"absolute",costPerUnit:.00325,tooltip:(0,c.jsx)("span",{children:"The amount of distinct users requesting your API throughout the billing period. Resets at the beginning of every billing period."})},{key:"monthly_active_sso_users",attribute:"total_auth_billing_period_sso_mau",title:"Monthly Single Sign-On Users",units:"absolute",costPerUnit:.015,tooltip:(0,c.jsx)("span",{children:"The amount of distinct Single Sign-On users requesting your API throughout the billing period. Resets at the beginning of every billing period."})}]},{title:"Storage",icon:(0,c.jsx)(r.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"storage_size",attribute:"total_storage_size_bytes",title:"Storage space",units:"bytes",costPerUnit:.021,tooltip:(0,c.jsx)("span",{children:"The storage size is the sum of all objects in your storage buckets. Billing is based on the average size in GB throughout your billing period."})},{key:"storage_egress",attribute:"total_storage_egress",title:"Storage egress",units:"bytes",costPerUnit:.09,tooltip:(0,c.jsx)("span",{children:"Storage egress contains any outgoing traffic (egress) from your storage buckets, only download operations are counted. We currently do not differentiate between no-cache and cache hits. Billing is based on the total amount of egress in GB throughout your billing period."})},{key:"storage_image_render_count",attribute:"total_storage_image_render_count",title:"Storage Image Transformations",units:"absolute",costPerUnit:.005,tooltip:(0,c.jsx)("span",{children:"We distinctly count all images transformed in the billing period, ignoring any transformations. Transforming one image with different transformations (i.e. once with height=50 and once with height=150), only counts as one. Resets at the beginning of every billing period."})}]},{title:"Functions",icon:(0,c.jsx)(a.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"func_count",attribute:"total_func_count",title:"Function Count",units:"absolute",costPerUnit:.1,tooltip:(0,c.jsx)("span",{children:"We continuously monitor the amount of serverless functions in your project. Billing is based on the maximum amount of functions at any point in time throughout your billing period."})},{key:"func_invocations",attribute:"total_func_invocations",title:"Function Invocations",units:"absolute",costPerUnit:2e-6,tooltip:(0,c.jsx)("span",{children:"Every single serverless function invocation independent of response status is counted. Billing is based on the sum of all invocations throughout your billing period."})}]},{title:"Realtime",icon:(0,c.jsx)(o.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"realtime_message_count",attribute:"total_realtime_message_count",title:"Realtime Messages",units:"absolute",costPerUnit:25e-7,tooltip:(0,c.jsx)("span",{children:"Billing is based on the total amount of messages throughout your billing period."})},{key:"realtime_peak_connection",attribute:"total_realtime_peak_connection",title:"Realtime Concurrent Peak Connections",units:"absolute",costPerUnit:.01,tooltip:(0,c.jsx)("span",{children:"Billing is based on the maximum amount of concurrent peak connections throughout your billing period."})}]}]},3651:function(e,t,s){s.d(t,{G8:function(){return l},TX:function(){return d},mt:function(){return o},nl:function(){return p}});var n=s(90849),i=s(81920);function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var o=function(e){var t,s=null===(t=e.metadata)||void 0===t?void 0:t.default_price_id;return void 0!==s?e.prices.find((function(e){return e.id===s})):e.prices[0]},c=function(e,t){var s,n=e.addons.find((function(e){return e.prod_id===t.id})),i=t.prices.find((function(e){return e.unit_amount===(null===n||void 0===n?void 0:n.unit_amount)}));return(null===i||void 0===i?void 0:i.id)||(null===(s=o(t))||void 0===s?void 0:s.id)},l=function(e){var t;if(void 0!==(null===(t=e.pitrDuration)||void 0===t?void 0:t.id)&&void 0===e.computeSize.id)return"To enable PITR for your project, your project must minimally be on a Small Add-on."},d=function(e,t,s,n,i,r){var l=s.computeSize,d=s.pitrDuration,u=s.customDomains,p=c(e,l),x=c(e,d),m=c(e,u),h=t?o(t):void 0,f=n.map((function(t){return c(e,t)})),j="af-south-1"===r?[]:[p,x,m].concat(f).filter((function(e){return void 0!==e})),v=Math.floor(Date.now()/1e3);return a(a({},h&&{tier:h.id}),{},{addons:j,proration_date:v,payment_method:i})},u=function(e,t,s,n){var i=t.find((function(t){var n=e.addons.find((function(e){return e.supabase_prod_id.includes(s)}));return t.id===(null===n||void 0===n?void 0:n.prod_id)}));if(void 0===i)return t.find((function(e){return e.metadata.supabase_prod_id===n}));var r=e.addons.find((function(e){return e.prod_id===i.id}));return a(a({},i),{},{isLocked:0===(null===r||void 0===r?void 0:r.unit_amount)})},p=function(e,t){var s=(0,i.H8)(t),n=(0,i.mp)(t),r=(0,i.$H)(t);return{computeSize:u(e,s,"_instance_","addon_instance_micro"),pitrDuration:u(e,n,"_pitr_","addon_pitr_0days"),customDomains:u(e,r,"_custom_domains","addon_custom_domains_disabled"),supportPlan:t.find((function(t){var s=null===e||void 0===e?void 0:e.addons.find((function(e){return e.supabase_prod_id.includes("_support_")}));return t.id===(null===s||void 0===s?void 0:s.prod_id)}))}}},46123:function(e,t,s){var n,i=s(90849),r=s(98213),a=s(84364),o=s(29239),c=s(24246),l=(n={},(0,i.Z)(n,o.U.DRAFT,{label:"Upcoming",badgeColor:"yellow"}),(0,i.Z)(n,o.U.PAID,{label:"Paid",badgeColor:"green"}),(0,i.Z)(n,o.U.VOID,{label:"Forgiven",badgeColor:"green"}),(0,i.Z)(n,o.U.UNCOLLECTIBLE,{label:"Outstanding",badgeColor:"red"}),(0,i.Z)(n,o.U.OPEN,{label:"Outstanding",badgeColor:"red"}),n);t.Z=function(e){var t=e.status,s=l[t];return(0,c.jsxs)(r.fC,{delayDuration:0,children:[(0,c.jsx)(r.xz,{children:(0,c.jsx)(a.Z,{size:"small",className:"capitalize",color:(null===s||void 0===s?void 0:s.badgeColor)||"gray",children:(null===s||void 0===s?void 0:s.label)||t})}),(0,c.jsx)(r.h_,{children:(0,c.jsxs)(r.VY,{side:"bottom",children:[(0,c.jsx)(r.Eh,{className:"radix-tooltip-arrow"}),(0,c.jsxs)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","w-[300px] space-y-2 border border-scale-200"].join(" "),children:[[o.U.OPEN,o.U.UNCOLLECTIBLE].includes(t)&&(0,c.jsx)("p",{className:"text-xs text-scale-1200",children:'We were not able to collect the money. Make sure you have a valid payment method and enough funds. Outstanding invoices may cause restrictions. You can manually pay the using the "Pay Now" button.'}),t===o.U.DRAFT&&(0,c.jsx)("p",{className:"text-xs text-scale-1200",children:"The invoice will soon be finalized and charged for."}),t===o.U.PAID&&(0,c.jsx)("p",{className:"text-xs text-scale-1200",children:"The invoice has been paid successfully. No action is required on your side."}),t===o.U.VOID&&(0,c.jsx)("p",{className:"text-xs text-scale-1200",children:"This invoice has been forgiven. No action is required on your side."})]})]})})]})}},29239:function(e,t,s){var n;s.d(t,{U:function(){return n}}),function(e){e.DRAFT="draft",e.PAID="paid",e.VOID="void",e.UNCOLLECTIBLE="uncollectible",e.OPEN="open"}(n||(n={}))},78330:function(e,t,s){var n=s(98213),i=s(94269),r=s(29432),a=s(47314),o=s(79894),c=s.n(o),l=s(24246);t.Z=function(e){var t=e.visible,s=e.onHide;return(0,l.jsx)(i.C,{hideFooter:!0,visible:t,size:"xlarge",header:"Spend cap",onCancel:function(){return s()},children:(0,l.jsxs)("div",{className:"py-4 space-y-4",children:[(0,l.jsx)(i.C.Content,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("p",{className:"text-sm",children:"Enabling the spend cap sets a limit on your usage to stay within your plan's quota, which controls costs but can limit service. Disabling the spend cap removes these limits, but any extra usage beyond the plan's limit will be charged per usage."}),(0,l.jsx)("p",{className:"text-sm",children:"Take a look at the following table to see which resources are chargeable and how they are charged:"}),(0,l.jsxs)("div",{className:"border rounded border-scale-600 bg-scale-500",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 pt-2 pb-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm text-scale-1100",children:"Item"}),(0,l.jsx)("p",{className:"w-[25%] text-sm text-scale-1100",children:"Limit"}),(0,l.jsx)("p",{className:"w-[25%] text-sm text-scale-1100",children:"Rate"})]}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Database size"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"8GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.125/GB"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Database egress"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"50GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.09/GB"})]})]}),(0,l.jsx)("div",{className:"py-2",children:(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsxs)("div",{className:"flex w-[50%] items-center space-x-2",children:[(0,l.jsx)("p",{className:"text-sm",children:"Auth MAUs"}),(0,l.jsxs)(n.fC,{delayDuration:0,children:[(0,l.jsx)(n.xz,{children:(0,l.jsx)(r.Z,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100"})}),(0,l.jsx)(n.h_,{children:(0,l.jsx)(n.h_,{children:(0,l.jsxs)(n.VY,{side:"bottom",children:[(0,l.jsx)(n.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"Monthly Active Users: A user that has made an API request in the last month"})})]})})})]})]}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"100,000"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.00325/user"})]})}),(0,l.jsx)("div",{className:"py-2",children:(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsxs)("div",{className:"flex w-[50%] items-center space-x-2",children:[(0,l.jsx)("p",{className:"text-sm",children:"Single Sign-On (SAML 2.0) MAUs"}),(0,l.jsxs)(n.fC,{delayDuration:0,children:[(0,l.jsx)(n.xz,{children:(0,l.jsx)(r.Z,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100"})}),(0,l.jsx)(n.h_,{children:(0,l.jsx)(n.h_,{children:(0,l.jsxs)(n.VY,{side:"bottom",children:[(0,l.jsx)(n.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"Single Sign-On Monthly Active Users: A user that has made an API request in the last month"})})]})})})]})]}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"50"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.015/user"})]})}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Storage size"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"100GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.021/GB"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Storage egress"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"200GB"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$0.09/GB"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Storage Image Transformations"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"100 origin images"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$5 per 1000 origin images"})]})]}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Realtime concurrent peak connections"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"500"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$10/1000"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Realtime messages"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"5 Million"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$2.50/Million"})]})]}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Function invocations"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"2 Million"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$2 per Million"})]}),(0,l.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,l.jsx)("p",{className:"w-[50%] text-sm",children:"Function count"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"100 functions"}),(0,l.jsx)("p",{className:"w-[25%] text-sm",children:"$10 per 100 functions"})]})]})]}),(0,l.jsxs)("p",{children:["See"," ",(0,l.jsx)(c(),{href:"https://supabase.com/pricing",passHref:!0,children:(0,l.jsx)("a",{className:"text-brand-900",target:"_blank",rel:"noreferrer",children:(0,l.jsx)("span",{children:"pricing page"})})})," ","for a full overview."]})]})}),(0,l.jsx)(i.C.Separator,{}),(0,l.jsx)(i.C.Content,{children:(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)(a.z,{block:!0,type:"primary",onClick:function(){return s()},children:"Understood"})})})]})})}},16658:function(e,t,s){var n=s(86677),i=s(44602),r=s(47314),a=s(24246);t.Z=function(e){var t=e.title,s=e.message,o=e.projectRef,c=(0,n.useRouter)();return(0,a.jsxs)("div",{style:{height:"calc(100vh - 5rem - 49.5px)"},className:"mx-auto flex max-w-xl flex-col justify-center space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i.Z,{strokeWidth:2}),(0,a.jsx)("h3",{className:"text-xl",children:t})]}),(0,a.jsx)("p",{className:"text-sm text-scale-1100",children:s}),(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(r.z,{onClick:function(){return c.push("/project/".concat(o))},children:"Back to dashboard"}),(0,a.jsx)(r.z,{onClick:function(){return c.push("/project/".concat(o,"/settings/billing/update"))},type:"default",children:"Back to billing"})]})]})}},2382:function(e,t,s){s.d(t,{AddNewPaymentMethodModal:function(){return Ce},ComputeSizeSelection:function(){return ge},CustomDomainSelection:function(){return Ne},ExitSurvey:function(){return ae},Invoices:function(){return Ae},PAYGUsage:function(){return d},PITRDurationSelection:function(){return ye},PaymentSummaryPanel:function(){return je},PlanSelection:function(){return A},ProUpgrade:function(){return J},Subscription:function(){return S},UpdateSuccess:function(){return $.Z}});var n,i=s(27693),r=s.n(i),a=s(53453),o=s(20796),c=s(64795),l=s(24246),d=function(e){var t,s,n=e.dateRange,i=null!==(t=n.period_start.date)&&void 0!==t?t:r()().utc().startOf("month").format(o.zT),d=null!==(s=n.period_end.date)&&void 0!==s?s:r()().utc().endOf("month").format(o.zT);return(0,l.jsx)("div",{className:"flex flex-col",children:c.K.map((function(e){return(0,l.jsx)("div",{className:"border-panel-border-light dark:border-panel-border-dark mb-8 overflow-hidden rounded border",children:(0,l.jsxs)("div",{className:"bg-panel-body-light dark:bg-panel-body-dark w-full",children:[(0,l.jsx)("div",{className:"bg-panel-header-light dark:bg-panel-header-dark",children:(0,l.jsx)("div",{className:"flex items-center justify-between overflow-hidden rounded px-6 py-3",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded bg-white",children:e.icon}),(0,l.jsx)("h5",{className:"mb-0 font-medium",children:e.title})]})})}),(0,l.jsx)("div",{className:"flex flex-col",children:e.features.map((function(e){return(0,l.jsx)("div",{className:"border-panel-border-light dark:border-panel-border-dark relative border-t px-6 py-3",children:(0,l.jsx)(a.Z,{hideChartType:!0,label:"".concat(e.title," for ").concat(r()().format("MMMM")),attribute:e.attribute,provider:"daily-stats",startDate:i,endDate:d,interval:"1d",defaultChartStyle:"bar",customDateFormat:"MMM D, YYYY"})},e.title)}))})]})},e.title)}))})},u=s(79894),p=s.n(u),x=s(27378),m=s(72853),h=s(47314),f=s(98213),j=s(68043),v=s(27102),b=s(36802),g=s(24903),y=s(84364),N=function(e){var t=e.item,s=e.amount,n=e.unitPrice,i=e.price,r=e.note;return(0,l.jsxs)("div",{className:"relative flex items-center border-t border-panel-border-light px-6 py-3 dark:border-panel-border-dark",children:[(0,l.jsxs)("div",{className:"flex w-[40%] items-center gap-3",children:[(0,l.jsx)("span",{className:"text-sm",children:t}),r&&(0,l.jsx)(y.Z,{color:"scale",children:(0,l.jsx)("span",{className:"text-xs text-scale-900",children:r})})]}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("span",{className:"text-sm",children:s})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsxs)("span",{className:"text-sm",children:["$",n]})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsxs)("span",{className:"text-sm",children:["$",i]})})]})},w=s(38230),_=s(45322),k=s(51896),P=s(47510),S=function(e){var t,s,n,i,a,d,u,y=e.showProjectName,S=void 0!==y&&y,C=(0,v.oR)().ui,O=(0,b.UO)().ref,T=(0,P.gY)(),Z=(0,v.P5)("disableProjectCreationAndUpdate"),D=(0,v.FH)(j.KA.READ,"subscriptions"),z=(0,v.FH)(j.KA.BILLING_WRITE,"stripe.subscriptions"),E=C.selectedProject,R=(0,k.S2)({projectRef:null===(t=C.selectedProject)||void 0===t?void 0:t.ref}),A=R.data,U=R.isLoading,M=R.error,F=(0,_.DK)({projectRef:O}).data,I=(null===A||void 0===A?void 0:A.tier.prod_id)===o.Tx.PAYG,L=(null===A||void 0===A?void 0:A.tier.supabase_prod_id)===o.ev.TEAM,Y=(null===A||void 0===A?void 0:A.tier.supabase_prod_id)===o.ev.ENTERPRISE,B=L||Y,G=null!==(s=null===A||void 0===A?void 0:A.addons)&&void 0!==s?s:[],$=A&&A.tier.unit_amount>0,W=(null!==(n=null===A||void 0===A?void 0:A.tier.unit_amount)&&void 0!==n?n:0)/100,V=null!==(i=null===A||void 0===A?void 0:A.billing.current_period_start)&&void 0!==i?i:0,q=null!==(a=null===A||void 0===A?void 0:A.billing.current_period_end)&&void 0!==a?a:0,H="/project/".concat(O,Y?"/settings/billing/update/enterprise":L?"/settings/billing/update/team":"/settings/billing/update");return(0,x.useEffect)((function(){var e;M&&C.setNotification({category:"error",message:"Failed to get project subscription: ".concat(null!==(e=null===M||void 0===M?void 0:M.message)&&void 0!==e?e:"unknown")})}),[M]),(0,l.jsx)(m.Z,{active:U,children:(0,l.jsx)("div",{className:"w-full mb-8 overflow-hidden border rounded border-panel-border-light dark:border-panel-border-dark",children:(0,l.jsxs)("div",{className:"bg-panel-body-light dark:bg-panel-body-dark",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 pt-4",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:S?null!==(d=null===E||void 0===E?void 0:E.name)&&void 0!==d?d:"":"Current subscription"}),(0,l.jsx)("h3",{className:"mb-0 text-xl",children:null!==(u=null===A||void 0===A?void 0:A.tier.name)&&void 0!==u?u:"-"})]}),(0,l.jsx)("div",{className:"flex flex-col items-end space-y-2",children:(0,l.jsxs)(f.fC,{delayDuration:0,children:[(0,l.jsx)(f.xz,{children:(0,l.jsx)(p(),{href:H,children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{type:"primary",disabled:!z||Z||!T,children:B?"Change add-ons":"Change subscription"})})})}),z&&!Z&&T?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(f.h_,{children:(0,l.jsxs)(f.VY,{side:"bottom",children:[(0,l.jsx)(f.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["border border-scale-200 text-center","rounded bg-scale-100 py-1 px-2 leading-none shadow"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:Z?(0,l.jsxs)(l.Fragment,{children:["Subscription changes are currently disabled.",(0,l.jsx)("br",{}),"Our engineers are working on a fix."]}):z?T?"":"Unable to update subscription as project is not active":"You need additional permissions to amend subscriptions"})})]})})]})})]}),$&&(0,l.jsx)("div",{className:"px-6 pt-4",children:(0,l.jsxs)("p",{children:["The next payment for this plan will be occur on"," ",r().unix(q).utc().format("MMM D, YYYY"),"."]})}),(0,l.jsx)("div",{className:"px-6 pb-4 mt-2",children:(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["See our"," ",(0,l.jsx)("a",{href:"https://supabase.com/pricing",target:"_blank",rel:"noreferrer",className:"underline",children:"pricing"})," ","for a more detailed analysis of what Supabase has on offer."]})}),D?!U&&A?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"relative flex items-center px-6 py-3 border-t border-panel-border-light dark:border-panel-border-dark",children:[(0,l.jsx)("div",{className:"w-[40%]",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Item"})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Amount"})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Unit Price"})}),(0,l.jsx)("div",{className:"flex w-[20%] justify-end",children:(0,l.jsx)("p",{className:"text-xs uppercase text-scale-900",children:"Price"})})]}),(0,l.jsx)(N,{item:"Base Plan",amount:1,unitPrice:W.toFixed(2),price:W.toFixed(2)}),G.map((function(e){return(0,l.jsx)(N,{item:e.name,amount:1,unitPrice:e.unit_amount/100,price:e.unit_amount/100},e.prod_id)})),I&&c.K.map((function(e){return e.features.map((function(e){var t,s,n,i,r,a,o=null!==(t=null===F||void 0===F||null===(s=F[e.key])||void 0===s?void 0:s.usage)&&void 0!==t?t:0,c=null!==(n=null===F||void 0===F||null===(i=F[e.key])||void 0===i?void 0:i.limit)&&void 0!==n?n:0,d=(null!==(r=null===F||void 0===F||null===(a=F[e.key])||void 0===a?void 0:a.cost)&&void 0!==r?r:0).toFixed(2);return(0,l.jsx)(N,{item:e.title,amount:"bytes"===e.units?(0,g.td)(o):o.toLocaleString(),unitPrice:"bytes"===e.units?"".concat(e.costPerUnit,"/GB"):e.costPerUnit,price:d,note:"bytes"===e.units?"".concat((0,g.td)(c)," included"):"".concat(c.toLocaleString()," included")},e.key)}))})),(0,l.jsxs)("div",{className:["relative flex items-center border-t px-6 py-3","border-panel-border-light dark:border-panel-border-dark"].join(" "),children:[(0,l.jsx)("div",{className:"w-[80%]",children:(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["Estimated cost for ",r().unix(V).utc().format("MMM D, YYYY")," ","- ",r().unix(q).utc().format("MMM D, YYYY")," so far"]})}),(0,l.jsxs)("div",{className:"flex w-[20%] items-center justify-end space-x-1",children:[(0,l.jsx)("p",{className:"text-scale-1100",children:"$"}),(0,l.jsx)("h3",{className:"m-0 text-xl",children:function(){var e=G.map((function(e){return e.unit_amount/100})).reduce((function(e,t){return e+t}),0),t=void 0===F?0:Object.keys(F).map((function(e){var t;return null!==(t=F[e].cost)&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0);return W+e+t}().toFixed(2)})]})]})]}):(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:"px-6 pb-4",children:(0,l.jsx)(w.Z,{resourceText:"view this project's subscription"})})]})})})},C=s(30335),O=s(66804),T=s(14971),Z=function(e){var t=e.plan,s=e.currentPlan,n=e.onSelectPlan,i=(0,P.gY)(),r=(0,v.P5)("disableProjectCreationAndUpdate"),a=(null===s||void 0===s?void 0:s.supabase_prod_id)===o.ev.TEAM;if(!s)return(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(h.z,{type:"text",children:(0,l.jsx)(T.Z,{size:18,className:"animate-spin"})})});var c=function(e,t){return["Free tier"].includes(e.name)?"default":t.prod_id===o.Tx.FREE?"primary":t.prod_id===o.Tx.TEAM&&"Team tier"!==e.name?"default":"primary"}(t,s),d=function(e,t){return"Enterprise"===e.name?"Contact sales":e.id===o.Tx.FREE?t.prod_id===o.Tx.FREE?"Current plan":"Downgrade to Free":e.id===o.Tx.PRO?t.prod_id===o.Tx.FREE?"Upgrade to Pro":t.prod_id===o.Tx.TEAM?"Downgrade to Pro":t.prod_id===o.Tx.PRO||t.prod_id===o.Tx.PAYG?"Edit plan configuration":"Contact sales":e.id===o.Tx.TEAM?t.prod_id===o.Tx.TEAM?"Edit plan configuration":[o.Tx.FREE,o.Tx.PRO,o.Tx.PAYG].includes(t.prod_id)?"Upgrade to Team":"Contact sales":void 0}(t,s),u=!i&&"Enterprise"!==t.name||a&&"Enterprise"!==t.name&&"Team tier"!==t.name||t.id===o.Tx.FREE&&s.prod_id===o.Tx.FREE;return"Enterprise"===t.name?(0,l.jsx)(p(),{href:"https://supabase.com/contact/enterprise",children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{disabled:u,type:c,block:!0,children:d})})}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center space-y-2",children:(0,l.jsxs)(f.fC,{delayDuration:0,children:[(0,l.jsx)(f.xz,{className:"w-full",children:(0,l.jsx)(h.z,{block:!0,type:c,disabled:u||r,onClick:function(){return n(t)},children:d})}),(u&&a||r||!i)&&(0,l.jsx)(f.h_,{children:(0,l.jsx)(f.h_,{children:(0,l.jsxs)(f.VY,{side:"bottom",children:[(0,l.jsx)(f.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 w-[260px] flex items-center justify-center"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200 text-center",children:r?"Subscription changes are currently disabled, our engineers are working on a fix":i?a?"Unable to update subscription from Team tier. Please reach out to us via support if you'd like to change your plan":"":"Unable to update subscription as project is not active"})})]})})})]})})},D=s(90849),z=(n={},(0,D.Z)(n,o.Tx.FREE,{name:"Free",description:"Perfect for passion projects & simple websites.",priceMonthly:0,priceUnit:"per month per project",warning:"Limit of 2 free projects",preface:"Get started with:",features:["Social OAuth providers","Up to 500MB database & 1GB file storage","Up to 2GB bandwidth","Up to 50MB file uploads","50,000 monthly active users","Up to 500K Edge Function invocations","200 concurrent Realtime connections","2 million Realtime messages","1-day log retention","Community support"],scale:"Free projects are paused after 1 week of inactivity."}),(0,D.Z)(n,o.Tx.PRO,{name:"Pro",description:"For production applications with the option to scale.",priceMonthly:25,priceUnit:"per month per project",warning:"+ any additional usage",preface:"Everything in the Free plan, plus:",features:["No project pausing","8GB database & 100GB file storage","50GB bandwidth","5GB file uploads","100,000 monthly active users","2M Edge Function invocations","500 concurrent Realtime connections","5 million Realtime messages","7-day log retention","Email support","Daily backups"]}),(0,D.Z)(n,o.Tx.TEAM,{new:!0,name:"Team",description:"Collaborate with different permissions and access patterns.",priceMonthly:599,priceUnit:"per month per organization",warning:"+ usage",preface:"The following features will apply to all projects within the organization:",features:["Usage-based pricing","100,000 monthly active users included","Organization member roles (ABAC)","Standardised Security Questionnaire","SOC2","SSO for Supabase Dashboard","Priority email support & SLAs","1 XS compute instance","14 day backups","28 day log retention"]}),(0,D.Z)(n,"Enterprise",{name:"Enterprise",href:"/contact/enterprise",description:"For large-scale applications managing serious workloads.",features:["Designated Support manager & SLAs","Enterprise OAuth providers","SSO/ SAML","SOC2","Custom contracts & invoicing","On-premise support","24\xd77\xd7365 premium enterprise support","Custom Security questionnaires","Private Slack channel","Uptime SLA"]}),n),E=function(e){var t=e.plan,s=e.currentPlan,n=e.onSelectPlan,i=(0,v.P5)("teamTier")||(null===s||void 0===s?void 0:s.supabase_prod_id)===o.ev.TEAM,r=z[t.id],a="Enterprise"===t.id,c=t.id===(null===s||void 0===s?void 0:s.prod_id)||t.id===o.Tx.PRO&&(null===s||void 0===s?void 0:s.prod_id)===o.Tx.PRO||t.id===o.Tx.PRO&&(null===s||void 0===s?void 0:s.prod_id)===o.Tx.PAYG;return(0,l.jsxs)("div",{className:["px-6 py-6 border rounded flex flex-col justify-between","".concat(a?"bg-scale-200":"bg-scale-300"),"".concat(a&&i?"lg:col-span-3 xl:col-auto":"")].join(" "),children:[(0,l.jsxs)("div",{className:["space-y-8","".concat(a?"flex flex-col xl:space-x-0 xl:flex-col":""),"".concat(a&&i?"lg:flex-row lg:space-x-24":"")].join(" "),children:[(0,l.jsxs)("div",{className:["space-y-4","".concat(a?"xl:w-auto":""),"".concat(a&&i?"xl:w-auto":"")].join(" "),children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{className:["text-brand-900 text-sm","".concat(a?"lg:text-base xl:text-sm font-bold font-mono uppercase":"")].join(" "),children:r.name}),c?(0,l.jsx)("div",{className:"text-xs bg-scale-500 text-scale-1000 rounded px-2 py-0.5",children:"Current plan"}):r.new?(0,l.jsx)("div",{className:"text-xs bg-brand-400 text-brand-900 rounded px-2 py-0.5",children:"New"}):(0,l.jsx)(l.Fragment,{})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:r.description}),(0,l.jsx)("div",{className:["space-y-2","".concat(a?"pb-6 border-b lg:pt-6 lg:border-b-0 lg:border-t xl:pt-0 xl:pb-6 xl:border-t-0 xl:border-b":"border-b border-t py-8")].join(" "),children:void 0!==r.priceMonthly?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-sm text-scale-1000",children:"Starting from"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"text-[3.4rem] leading-none",children:["$",r.priceMonthly]}),(0,l.jsx)("p",{className:"text-sm text-scale-1000",children:r.priceUnit})]}),(0,l.jsx)("div",{className:"text-xs bg-brand-400 text-brand-900 rounded px-2 py-0.5 w-fit",children:r.warning})]}):(0,l.jsx)(Z,{plan:t,currentPlan:s,onSelectPlan:n})})]}),(0,l.jsxs)("div",{className:"".concat(a?"lg:space-y-0 lg:!mt-0 xl:space-y-4":"space-y-4"),children:[(0,l.jsx)("p",{className:"text-xs text-scale-1000",children:r.preface}),(0,l.jsx)("ul",{role:"list",className:["".concat(a?"xl:gap-0 xl:columns-1":""),"".concat(a&&i?"lg:gap-16 lg:columns-2":"")].join(" "),children:r.features.map((function(e){return(0,l.jsxs)("li",{className:"flex py-2",children:[(0,l.jsx)("div",{className:"w-[12px]",children:(0,l.jsx)(O.Z,{className:"h-3 w-3 text-brand-900 translate-y-[2.5px]","aria-hidden":"true",strokeWidth:3})}),(0,l.jsx)("p",{className:"ml-3 text-xs text-scale-1100",children:e})]},e)}))})]})]}),!a&&(0,l.jsxs)("div",{className:"space-y-4 !mt-20",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-xs text-scale-1000",children:r.scale}),"Pro"===r.name&&(null===s||void 0===s?void 0:s.prod_id)===o.Tx.PRO&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Need more? Turn off your spend cap to Pay As You Grow"}),(0,l.jsx)("p",{className:"text-xs text-scale-1000",children:"Additional fees apply for spend beyond the limits above"})," "]}),"Pro"===r.name&&(null===s||void 0===s?void 0:s.prod_id)===o.Tx.PAYG&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Spend cap is currently disabled"}),(0,l.jsx)("p",{className:"text-xs text-scale-1000",children:"You will be charged for usage beyond the plan limits"})," "]})]}),(0,l.jsx)(Z,{plan:t,currentPlan:s,onSelectPlan:n})]})]})},R=s(65961),A=function(e){var t=e.visible,s=e.tiers,n=e.currentPlan,i=e.onSelectPlan,r=function(e){return e.filter((function(e){return e.id===o.Tx.FREE})).concat(e.filter((function(e){return e.id===o.Tx.PRO}))).concat(e.filter((function(e){return e.id===o.Tx.TEAM}))).concat([{id:"Enterprise",name:"Enterprise",description:"For large-scale applications managing serious workloads",metadata:{features:"Point in time recovery\\nDesignated Support manager & SLAs\\nSSO / SAML + SOC2\\nCustom contracts & invoicing\\n24\xd77\xd7365 premium enterprise support"},prices:[]}]).filter(Boolean)}(s),a=3===r.length?"gap-8 lg:grid-cols-3":"gap-4 lg:grid-cols-3 xl:grid-cols-billingWithTeam";return(0,l.jsx)(C.u,{show:t,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0 -translate-x-10",enterTo:"transform opacity-100 translate-x-0",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg",children:"Change your project's subscription"}),(0,l.jsx)("div",{className:"grid py-8 grid-cols-2 ".concat(a),children:r.map((function(e){return(0,l.jsx)(E,{plan:e,currentPlan:n,onSelectPlan:function(){return i(e)}},e.id)}))}),(0,l.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,l.jsx)(p(),{href:"https://supabase.com/pricing",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(h.z,{type:"link",icon:(0,l.jsx)(R.Z,{size:14,strokeWidth:1.5}),className:"text-sm text-scale-1000 hover:text-scale-1100 hover:bg-scale-400",children:"See detailed comparisons across plans"})})})})]})})},U=s(55732),M=s(34707),F=s.n(M),I=s(86677),L=s(29432),Y=s(17634),B=s(14919),G=s(92836),$=s(16658),W=s(3651),V=s(81920),q=s(39919);var H=function(e){var t=e.onClick;return(0,l.jsx)("div",{className:"-ml-2 2xl:absolute 2xl:top-[2px] 2xl:left-0",children:(0,l.jsx)(h.z,{type:"text",icon:(0,l.jsx)(q.Z,{}),onClick:t,children:"Back"})})},K=s(7831),X=s(9740),Q=s(78330),J=function(e){var t,s,n,i,r,a,c=e.products,d=e.paymentMethods,u=e.currentSubscription,p=e.isLoadingPaymentMethods,m=e.onSelectBack,h=e.onPaymentMethodAdded,f=(0,v.oR)(),j=f.app,b=f.ui,y=(0,I.useRouter)(),N=(0,x.useState)(null),w=N[0],_=N[1],k=(0,x.useRef)(null),P=c.addons,S=(0,V.H8)(P),O=(0,V.mp)(P),T=(0,V.$H)(P),Z=(0,W.nl)(u,P),D=null!==(t=null===(s=b.selectedProject)||void 0===s?void 0:s.id)&&void 0!==t?t:-1,z=null===(n=b.selectedProject)||void 0===n?void 0:n.ref,E=null!==(i=null===(r=b.selectedProject)||void 0===r?void 0:r.region)&&void 0!==i?i:"",R=(0,x.useState)(u.tier.prod_id===o.Tx.FREE||u.tier.prod_id===o.Tx.PRO),A=R[0],M=R[1],q=(0,x.useState)(!1),J=q[0],ee=q[1],te=(0,x.useState)(!1),se=te[0],ne=te[1],ie=(0,x.useState)(!1),re=ie[0],ae=ie[1],oe=(0,x.useState)(!1),ce=oe[0],le=oe[1],de=(0,x.useState)(!1),ue=de[0],pe=de[1],xe=(0,x.useState)(Z.computeSize),me=xe[0],he=xe[1],fe=(0,x.useState)(Z.pitrDuration),ve=fe[0],be=fe[1],we=(0,x.useState)(Z.customDomains),_e=we[0],ke=we[1],Pe=[Z.supportPlan].filter((function(e){return void 0!==e})),Se={computeSize:me,pitrDuration:ve,customDomains:_e},Oe=(0,x.useState)(""),Te=Oe[0],Ze=Oe[1],De=(0,x.useState)(),ze=De[0],Ee=De[1],Re=A?null===c||void 0===c?void 0:c.tiers.find((function(e){return e.id===o.Tx.PRO})):null===c||void 0===c?void 0:c.tiers.find((function(e){return e.id===o.Tx.PAYG})),Ae=u.tier.prod_id===o.Tx.PRO||u.tier.prod_id===o.Tx.PAYG,Ue=(null===(a=Z.computeSize)||void 0===a?void 0:a.id)!==Se.computeSize.id;(0,x.useEffect)((function(){!p&&d&&d.length>0&&Ze(d[0].id)}),[p,d]),(0,x.useEffect)((function(){Me()}),[me,ve,_e,A]);var Me=function(){var e=(0,U.Z)(F().mark((function e(){var t,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Re){e.next=2;break}return e.abrupt("return");case 2:return t=(0,W.TX)(u,Re,Se,Pe,Te,E),ee(!0),e.next=6,(0,B.v_)("".concat(o.T5,"/projects/").concat(z,"/subscription/preview"),t);case 6:(s=e.sent).error&&b.setNotification({category:"error",message:"Failed to fetch subscription preview: ".concat(s.error.message)}),Ee(s),ee(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e;_(null),null===(e=k.current)||void 0===e||e.resetCaptcha()},Ie=function(){var e=(0,U.Z)(F().mark((function e(){var t,s,n,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(!0),t=w,e.prev=2,t){e.next=9;break}return e.next=6,null===(s=k.current)||void 0===s?void 0:s.execute({async:!0});case 6:i=e.sent,t=null!==(n=null===i||void 0===i?void 0:i.response)&&void 0!==n?n:null,_(t);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),ne(!1),e.abrupt("return",!1);case 15:return ne(!1),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=(0,U.Z)(F().mark((function e(){var t,s,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),t=(0,W.TX)(u,Re,Se,Pe,Te,E),e.next=4,(0,B.r$)("".concat(o.T5,"/projects/").concat(z,"/subscription"),t);case 4:s=e.sent,Fe(),null!==s&&void 0!==s&&s.error?b.setNotification({category:"error",message:"Failed to update subscription: ".concat(null===s||void 0===s||null===(n=s.error)||void 0===n?void 0:n.message)}):Ue?(j.onProjectStatusUpdated(D,o.S.RESTORING),b.setNotification({category:"success",message:"Your project has been updated and is currently restarting to update its instance size",duration:8e3}),y.push("/project/".concat(z))):ae(!0),ne(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!se&&re?(0,l.jsx)($.Z,{projectRef:z||"",title:"Your project has been updated!",message:"Let us know if you have any feedback at sales@supabase.io."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(C.u,{show:!0,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0 translate-x-10",enterTo:"transform opacity-100 translate-x-0",className:"flex items-start justify-between w-full",children:[(0,l.jsx)("div",{className:"flex-grow mt-10",children:(0,l.jsxs)("div",{className:"relative space-y-4",children:[(0,l.jsxs)("div",{className:"relative px-32 mx-auto space-y-4 2xl:max-w-5xl",children:[(0,l.jsx)(H,{onClick:function(){return m()}}),(0,l.jsx)("h4",{className:"text-lg text-scale-900 !mb-8",children:"Change your project's subscription"})]}),(0,l.jsxs)("div",{className:"px-32 pb-8 mx-auto space-y-8 overflow-y-auto 2xl:max-w-5xl",style:{height:"calc(100vh - 9rem - 57px)"},children:[(0,l.jsx)("div",{className:"space-y-2",children:Ae?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("h3",{className:"text-3xl",children:["Managing your ",(0,l.jsx)("span",{className:"text-brand-900",children:"Pro"})," plan"]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h3",{className:"text-xl",children:["Welcome to ",(0,l.jsx)("span",{className:"text-brand-900",children:"Pro"})]}),(0,l.jsx)("p",{className:"text-base text-scale-1100",children:"Your new subscription will begin immediately after payment"})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-16 px-6 py-4 border rounded border-panel-border-light dark:border-panel-border-dark bg-panel-body-light drop-shadow-sm dark:bg-panel-body-dark",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{children:"Spend cap"}),(0,l.jsx)(L.Z,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100",onClick:function(){return pe(!0)}})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"By default, Pro projects have a spend cap enabled to control costs and prevent exceeding limits. This restricts usage upon exhausting the quota. To scale without restrictions, disable the spend cap and be charged for overusage beyond the quota."})]}),(0,l.jsx)(Y.Z,{checked:A,onChange:function(){return M(!A)}})]}),"af-south-1"!==E&&(0,l.jsxs)(l.Fragment,{children:[void 0!==Z.supportPlan&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.Z,{light:!0}),(0,l.jsx)(K.Z,{currentOption:Z.supportPlan})]}),(0,l.jsx)(G.Z,{light:!0}),(0,l.jsx)(Ne,{options:T,currentOption:Ae?Z.customDomains:void 0,selectedOption:Se.customDomains,onSelectOption:ke}),(0,l.jsx)(G.Z,{light:!0}),(0,l.jsx)(ye,{pitrDurationOptions:O,currentPitrDuration:Ae?Z.pitrDuration:void 0,selectedPitrDuration:Se.pitrDuration,onSelectOption:be}),(0,l.jsx)(G.Z,{light:!0}),(0,l.jsx)(ge,{computeSizes:S||[],currentComputeSize:Z.computeSize,selectedComputeSize:Se.computeSize,onSelectOption:he})]})]})]})}),(0,l.jsx)(je,{isRefreshingPreview:J,subscriptionPreview:ze,isSpendCapEnabled:A,currentPlan:u.tier,currentAddons:Z,currentSubscription:u,selectedPlan:Re,selectedAddons:Se,paymentMethods:d,isLoadingPaymentMethods:p,selectedPaymentMethod:Te,onSelectPaymentMethod:Ze,onSelectAddNewPaymentMethod:function(){le(!0)},beforeConfirmPayment:Ie,onConfirmPayment:Le,isSubmitting:se,captcha:(0,l.jsx)(X.Z,{ref:k,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:function(e){_(e)},onExpire:function(){_(null)}})})]}),(0,l.jsx)(Ce,{visible:ce,returnUrl:"".concat((0,g.Ax)(),"/project/").concat(z,"/settings/billing/update/pro"),onCancel:function(){return le(!1)},onConfirm:function(){return le(!1),h()}}),(0,l.jsx)(Q.Z,{visible:ue,onHide:function(){return pe(!1)}})]})},ee=s(44285),te=s(98784),se=s(77758),ne=s(3648),ie=s(94269),re=s(11597),ae=function(e){var t,s,n,i,r,a,d=e.freeTier,u=e.subscription,p=e.onSelectBack,m=(0,I.useRouter)(),j=(0,v.oR)(),b=j.app,g=j.ui,y=null!==(t=null===(s=g.selectedProject)||void 0===s?void 0:s.id)&&void 0!==t?t:-1,N=null===(n=g.selectedProject)||void 0===n?void 0:n.ref,w=(0,x.useRef)(null),_=(0,x.useState)(null),k=_[0],P=_[1],S=(0,v.P5)("disableProjectCreationAndUpdate"),O=(0,x.useRef)(),T=(0,x.useState)(""),Z=T[0],D=T[1],z=(0,x.useReducer)((function(e,t){return(0,te.includes)(e,t.target.value)?(0,te.without)(e,t.target.value):[].concat((0,ee.Z)(e),[t.target.value])}),[]),E=z[0],R=z[1],A=(0,x.useState)(!1),M=A[0],L=A[1],Y=(0,x.useState)(!1),G=Y[0],W=Y[1],V=(0,x.useState)(!1),H=V[0],K=V[1],Q=(0,x.useState)(!1),J=Q[0],ae=Q[1],oe=(0,x.useState)(),ce=oe[0],le=oe[1],de=null===u||void 0===u?void 0:u.addons.find((function(e){return e.supabase_prod_id.includes("addon_instance")})),ue=(null!==(i=null===ce||void 0===ce?void 0:ce.returned_credits_for_unused_time)&&void 0!==i?i:0)/100,pe=new Date(1e3*(null!==(r=null===ce||void 0===ce?void 0:ce.bill_on)&&void 0!==r?r:0));(0,x.useEffect)((function(){d&&me()}),[d]);var xe=function(){return"A total of $".concat(ue," will be refunded as credits on ").concat(pe.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})," to your balance for unused time on your resources. Do let us know if you have any other feedback at sales@supabase.io.")},me=function(){var e=(0,U.Z)(F().mark((function e(){var t,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(Date.now()/1e3),e.next=3,(0,B.v_)("".concat(o.T5,"/projects/").concat(N,"/subscription/preview"),{tier:d.prices[0].id,addons:[],proration_date:t});case 3:s=e.sent,le(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=(0,U.Z)(F().mark((function e(t){var s,n,i,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==E.length){e.next=2;break}return e.abrupt("return",g.setNotification({category:"error",message:"Please select at least one reason for cancelling your subscription"}));case 2:if(L(!0),s=k,e.prev=4,s){e.next=10;break}return e.next=8,null===(n=w.current)||void 0===n?void 0:n.execute({async:!0});case 8:r=e.sent,s=null!==(i=null===r||void 0===r?void 0:r.response)&&void 0!==i?i:null;case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),L(!1),e.abrupt("return");case 16:if(void 0===de){e.next=21;break}return D(t.message),e.abrupt("return",ae(!0));case 21:je(t);case 22:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e;P(null),null===(e=w.current)||void 0===e||e.resetCaptcha()},je=function(){var e=(0,U.Z)(F().mark((function e(t){var s,n,i,r,a,c,l,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(s=null===t||void 0===t?void 0:t.message)&&void 0!==s?s:Z,e.prev=1,L(!0),W(!0),i=d.prices[0].id,r=[],a=Math.floor(Date.now()/1e3),e.next=9,(0,B.r$)("".concat(o.T5,"/projects/").concat(N,"/subscription"),{tier:i,addons:r,proration_date:a});case 9:if(c=e.sent,fe(),null===c||void 0===c||!c.error){e.next=15;break}return e.abrupt("return",g.setNotification({category:"error",message:"Failed to cancel subscription: ".concat(null===c||void 0===c||null===(l=c.error)||void 0===l?void 0:l.message),error:c.error}));case 15:void 0!==de?(b.onProjectStatusUpdated(y,o.S.RESTORING),g.setNotification({category:"info",message:xe(),duration:8e3}),g.setNotification({category:"success",message:"Your project has been updated and is currently restarting to update its instance size",duration:8e3}),m.push("/project/".concat(N))):K(!0);case 16:return e.next=18,(0,B.v_)("".concat(o.T5,"/feedback/downgrade"),{projectRef:N,reasons:E.reduce((function(e,t){return"".concat(e,"- ").concat(t,"\n")}),""),additionalFeedback:n,exitAction:"downgrade"});case 18:if(!(u=e.sent).error){e.next=21;break}throw u.error;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),g.setNotification({category:"error",message:"Failed to cancel subscription: ".concat(e.t0.message)});case 26:return e.prev=26,L(!1),W(!1),e.finish(26);case 30:case"end":return e.stop()}}),e,null,[[1,23,26,30]])})));return function(t){return e.apply(this,arguments)}}();return H?(0,l.jsx)($.Z,{projectRef:N||"",title:"Your project has been updated",message:xe()}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.u,{show:!0,appear:!0,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0 translate-x-10",enterTo:"transform opacity-100 translate-x-0",children:(0,l.jsx)("div",{className:"w-full xl:w-4/5 space-y-8",children:(0,l.jsxs)("div",{ref:O,className:"relative",children:[(0,l.jsx)("div",{className:"absolute top-[2px] -left-24",children:(0,l.jsx)(h.z,{type:"text",icon:(0,l.jsx)(q.Z,{}),onClick:p,children:"Back"})}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h4",{className:"text-lg",children:"We're sad that you're leaving."}),(0,l.jsx)("p",{className:"text-scale-1100",children:"We always strive to improve Supabase as much as we can. Please let us know the reasons you are cancelling your subscription so that we can improve in the future."})]}),(0,l.jsx)(se.Z,{validateOnBlur:!0,initialValues:{message:""},onSubmit:he,children:function(){return(0,l.jsxs)("div",{className:"space-y-8 py-8",children:[(0,l.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:c.Y.map((function(e){var t=E.find((function(t){return t===e}));return(0,l.jsxs)("label",{className:"\n                              flex cursor-pointer items-center space-x-2 rounded-md py-1 \n                              pl-2 pr-3 text-center text-sm\n                              shadow-sm transition-all duration-100\n                              ".concat(t?" bg-scale-1200 text-scale-100 opacity-100 hover:bg-opacity-75":" bg-scale-700 text-scale-1200 opacity-25 hover:opacity-50","\n                          "),children:[(0,l.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:R}),(0,l.jsx)("div",{children:e})]},e)}))}),(0,l.jsx)(ne.Z.TextArea,{id:"message",name:"message",label:"Anything else that we can improve on?"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-xs text-scale-900",children:"The unused amount for the remaining of your billing cycle will be refunded as credits"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.z,{htmlType:"button",type:"default",onClick:function(){return m.push("/project/".concat(N,"/settings/billing/update"))},children:"Cancel"}),(0,l.jsxs)(f.fC,{delayDuration:0,children:[(0,l.jsx)(f.xz,{className:"w-full",children:(0,l.jsx)(h.z,{type:"danger",htmlType:"submit",loading:M,disabled:S||M,children:"Confirm downgrade"})}),S?(0,l.jsx)(f.h_,{children:(0,l.jsxs)(f.VY,{side:"bottom",children:[(0,l.jsx)(f.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"Subscription changes are currently disabled. Our engineers are working on a fix."})})]})}):null]})]})]}),(0,l.jsx)("div",{className:"self-center",children:(0,l.jsx)(X.Z,{ref:w,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:function(e){P(e)},onExpire:function(){P(null)}})})]})}})]})})}),(0,l.jsx)(ie.C,{hideFooter:!0,visible:J,size:"large",header:"Downgrading project to free",onCancel:function(){ae(!1),L(!1)},children:(0,l.jsxs)("div",{className:"space-y-4 py-4",children:[(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)(re.Z,{withIcon:!0,variant:"warning",title:"Your project will need to be restarted for changes to take place",children:["Your project is currently using a"," ",(null!==(a=null===de||void 0===de?void 0:de.name)&&void 0!==a?a:"").toLocaleLowerCase()," and will be downgraded to a micro add-on. Upon confirmation, your project will be restarted for changes to take place. This will take up to 2 minutes during which your project will be unavailable."]})}),(0,l.jsx)(ie.C.Content,{children:(0,l.jsx)("p",{className:"text-sm text-scale-1200",children:"Would you like to update your project now?"})}),(0,l.jsx)(ie.C.Separator,{}),(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(h.z,{block:!0,type:"default",onClick:function(){ae(!1),L(!1)},children:"Cancel"}),(0,l.jsx)(h.z,{block:!0,htmlType:"submit",loading:G,disabled:G,onClick:function(){return je()},children:"Confirm"})]})})]})})]})},oe=s(33769),ce=s(9150),le=s(58728),de=s(87474),ue=function(e){var t=e.visible,s=e.totalDue,n=e.billingDate,i=e.costBreakdown,r=e.onCancel,a=(0,te.groupBy)(i,"period.start");return(0,l.jsx)(ie.C,{hideFooter:!0,visible:t,size:"xlarge",header:"Cost breakdown details",onCancel:r,children:(0,l.jsxs)("div",{className:"space-y-2 py-4",children:[(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)("p",{className:"text-sm",children:["The following shows the cost breakdown of the invoice that will be billed on"," ",n.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),"."]})}),(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)("div",{className:"rounded border border-scale-600 bg-scale-500",children:[(0,l.jsxs)("div",{className:"flex items-center border-b border-scale-600 py-2 px-4",children:[(0,l.jsx)("div",{className:"w-[75%] text-xs",children:"Description"}),(0,l.jsx)("div",{className:"w-[10%] text-right text-xs",children:"Qty"}),(0,l.jsx)("div",{className:"w-[15%] text-right text-xs",children:"Amount"})]}),Object.keys(a).map((function(e,t){var s=new Date(1e3*Number(e)).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),n=new Date(1e3*a[e][0].period.end).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"});return(0,l.jsxs)("div",{className:"border-b border-scale-600",children:[(0,l.jsx)("div",{className:"flex items-center py-2 px-4 ",children:(0,l.jsxs)("div",{className:"w-full text-xs text-scale-1100",children:[s," - ",n]})}),a[e].map((function(e,t){return(0,l.jsxs)("div",{className:"flex items-center py-2 px-4",children:[(0,l.jsx)("div",{className:"w-[75%] text-sm",children:e.description}),(0,l.jsx)("div",{className:"w-[10%] text-right text-sm",children:e.quantity}),(0,l.jsxs)("div",{className:"w-[15%] text-right text-sm",children:["$",(e.amount/100).toFixed(2)]})]},"breakdown-row-".concat(t))}))]},"breakdown-".concat(t))})),(0,l.jsxs)("div",{className:"flex flex-col space-y-1 py-2 px-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-[75%] text-sm",children:"Total amount"}),(0,l.jsx)("div",{className:"w-[10%] text-right text-sm"}),(0,l.jsxs)("div",{className:"w-[15%] text-right text-xl",children:["$",s<0?0:s.toFixed(2)]})]}),s<0&&(0,l.jsxs)("div",{className:"flex items-center text-scale-1100",children:[(0,l.jsx)("div",{className:"w-[75%] text-sm",children:"Amount returned as credits for unused resources"}),(0,l.jsx)("div",{className:"w-[10%] text-right text-sm"}),(0,l.jsxs)("div",{className:"w-[15%] text-right text-sm",children:["$",Math.abs(s).toFixed(2)]})]})]})]})})]})})},pe=function(e){var t,s,n,i=e.totalMonthlyCost,r=e.subscriptionPreview,a=e.isRefreshingPreview,o=e.isSpendCapEnabled,c=null!==(t=null===r||void 0===r?void 0:r.has_changes)&&void 0!==t&&t,d=(null!==(s=null===r||void 0===r?void 0:r.amount_due_immediately)&&void 0!==s?s:0)/100,u=new Date(1e3*(null!==(n=null===r||void 0===r?void 0:r.bill_on)&&void 0!==n?n:0)),p=(new Date).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})===u.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),h=(0,x.useState)(!1),j=h[0],v=h[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.Z,{active:a,children:(0,l.jsx)("div",{className:"mb-2 space-y-4",children:(0,l.jsxs)("div",{className:"flex items-start justify-between space-x-12",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{children:"Total amount due"}),c&&(0,l.jsxs)(f.fC,{delayDuration:0,children:[(0,l.jsx)(f.xz,{children:(0,l.jsx)(L.Z,{size:16,strokeWidth:1.5,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:function(){return v(!0)}})}),(0,l.jsx)(f.h_,{children:(0,l.jsxs)(f.VY,{side:"bottom",children:[(0,l.jsx)(f.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"How is this calculated?"})})]})})]})]}),c?(0,l.jsxs)("div",{className:"space-y-2",children:[d<0?(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["A total of $",Math.abs(d).toFixed(2)," will be returned on"," ",(0,l.jsx)("span",{className:"text-brand-900",children:u.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})})," ","for unused resources."]}):(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["This amount ",!o&&!p&&"+ usage fees ","will be charged on"," ",(0,l.jsx)("span",{className:"text-brand-900",children:u.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})}),"."]}),(0,l.jsxs)("p",{className:"text-sm text-scale-1100",children:["You'll pay a monthly total of"," ",(0,l.jsxs)("span",{className:"text-scale-1200",children:["$",i," ",!o&&"+ usage fees "]})," ","for each subsequent billing cycle."]})]}):(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"No changes to current subscription"})]}),(0,l.jsxs)("div",{className:"relative -top-[8px] flex items-end justify-end",children:[(0,l.jsx)("p",{className:"relative -top-[1px] text-scale-1100",children:"$"}),(0,l.jsx)("p",{className:"text-2xl",children:c?(d<0?0:d).toFixed(2):"0.00"})]})]})})}),(0,l.jsx)(ue,{visible:j,totalDue:d,billingDate:u,costBreakdown:(null===r||void 0===r?void 0:r.cost_breakdown)||[],onCancel:function(){return v(!1)}})]})},xe=s(33114),me=function(e){var t=e.metadata.supabase_prod_id.split("_")[2];return Number(t.split("days")[0])},he=function(e){var t=e.visible,s=e.isSubmitting,n=e.isChangingInstanceSize,i=e.isDisablingPITR,r=e.onCancel,a=e.onConfirm;return(0,l.jsx)(ie.C,{hideFooter:!0,visible:t,size:"large",header:"Confirm changes to your project's subscription",onCancel:r,children:(0,l.jsxs)("div",{className:"space-y-4 py-4",children:[(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)("div",{className:"space-y-2",children:[n&&(0,l.jsx)(re.Z,{withIcon:!0,variant:"warning",title:"Your project will need to be restarted for size changes to take place",children:"Upon confirmation, your project will be restarted to change your instance size. This will take up to 2 minutes in which your project will be unavailable during the time."}),i&&(0,l.jsx)(re.Z,{withIcon:!0,variant:"warning",title:"All available PITR back ups for your project will be removed and are non-recoverable",children:"As such, your project will not have past PITR backups if you were to re-enable PITR for your project."})]})}),(0,l.jsx)(ie.C.Content,{children:(0,l.jsx)("p",{className:"text-sm text-scale-1200",children:"Confirm the changes to your project's subscription?"})}),(0,l.jsx)(ie.C.Separator,{}),(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(h.z,{block:!0,type:"default",onClick:r,children:"Cancel"}),(0,l.jsx)(h.z,{block:!0,type:"primary",loading:s,disabled:s,onClick:a,children:"Confirm"})]})})]})})},fe=s(86010),je=function(e){var t,s,n,i,r,a,c,d,u,p,m,b,g,y,N,w,_,k,S=e.isRefreshingPreview,C=e.isSpendCapEnabled,O=e.currentSubscription,Z=e.subscriptionPreview,D=e.currentPlan,z=e.currentAddons,E=e.selectedPlan,R=e.selectedAddons,A=e.paymentMethods,M=e.selectedPaymentMethod,I=e.isLoadingPaymentMethods,L=e.onSelectPaymentMethod,Y=e.onSelectAddNewPaymentMethod,B=e.beforeConfirmPayment,G=e.onConfirmPayment,$=e.isSubmitting,V=e.captcha,q=(0,v.oR)().ui,H=(0,P.gY)(),K=null===(t=q.selectedProject)||void 0===t?void 0:t.region,X=(0,v.FH)(j.KA.BILLING_WRITE,"stripe.payment_methods"),Q=(0,x.useState)(!1),J=Q[0],ee=Q[1],te=(0,v.P5)("disableProjectCreationAndUpdate"),se=(void 0!==E?null!==(s=null===(n=E.prices.find((function(e){return e.id===E.metadata.default_price_id})))||void 0===n?void 0:n.unit_amount)&&void 0!==s?s:0:null!==(i=null===O||void 0===O?void 0:O.tier.unit_amount)&&void 0!==i?i:0)+Object.keys(R).map((function(e){var t=R[e];return t.prices.find((function(e){return e.id===t.metadata.default_price_id}))})).reduce((function(e,t){return e+t.unit_amount}),0),ne=void 0!==z.pitrDuration?me(z.pitrDuration):0,ie=void 0!==R.pitrDuration?me(R.pitrDuration):0,re=D.supabase_prod_id===o.ev.ENTERPRISE,ae=D.prod_id!==o.Tx.PAYG&&E&&D.prod_id!==E.id||D.prod_id!==o.Tx.PAYG&&!C||D.prod_id===o.Tx.PAYG&&C,ue=z.computeSize.id!==R.computeSize.id,je=(null===(r=z.pitrDuration)||void 0===r?void 0:r.id)!==(null===(a=R.pitrDuration)||void 0===a?void 0:a.id),ve=(null===(c=z.customDomains)||void 0===c?void 0:c.id)!==(null===(d=R.customDomains)||void 0===d?void 0:d.id),be=D.supabase_prod_id===o.ev.PAYG&&E&&E.metadata.supabase_prod_id===o.ev.PRO,ge=re?ue||je:null!==(u=null===Z||void 0===Z?void 0:Z.has_changes)&&void 0!==u&&u,ye=function(e){return e.prod_id===o.Tx.PAYG||e.id===o.Tx.PAYG?"Pro tier (No spend caps)":e.name},Ne=function(e){var t,s,n;return((null!==(t=null===(s=(null!==(n=null===O||void 0===O?void 0:O.addons)&&void 0!==n?n:[]).find((function(t){var s;return t.prod_id===(null===(s=z[e])||void 0===s?void 0:s.id)})))||void 0===s?void 0:s.unit_amount)&&void 0!==t?t:0)/100).toFixed(2)},we=function(){var e=(0,U.Z)(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=(0,W.G8)(R))){e.next=5;break}return e.abrupt("return",q.setNotification({duration:4e3,category:"error",message:t}));case 5:return e.next=7,B();case 7:e.sent&&(ue||je&&0===ie?ee(!0):G());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:(0,fe.Z)("bg-panel-body-light dark:bg-panel-body-dark overflow-y-auto border-l","px-6 lg:px-12 py-10 space-y-8","min-w-[450px] max-w-[450px] 2xl:min-w-[630px] 2xl:max-w-[630px]"),style:{height:"calc(100vh - 57px)"},children:[(0,l.jsx)("p",{children:"Payment Summary"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Selected subscription"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(ae?"text-scale-1100 line-through":""," text-sm"),children:ye(D)}),(0,l.jsxs)("p",{className:"".concat(ae?"text-scale-1100 line-through":""," text-sm"),children:["$",(D.unit_amount/100).toFixed(2)]})]}),ae&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:ye(E)}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,W.mt)(E).unit_amount/100).toFixed(2)]})]})]}),"af-south-1"!==K&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Selected add-ons"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(ue?"text-scale-1100 line-through":""," text-sm"),children:z.computeSize.name}),(0,l.jsxs)("p",{className:"".concat(ue?"text-scale-1100 line-through":""," text-sm"),children:["$",Ne("computeSize")]})]}),ue&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:R.computeSize.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,W.mt)(R.computeSize).unit_amount/100).toFixed(2)]})]}),void 0!==(null===(p=z.pitrDuration)||void 0===p?void 0:p.id)&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(je?"text-scale-1100 line-through":""," text-sm"),children:null===(m=z.pitrDuration)||void 0===m?void 0:m.name}),(0,l.jsxs)("p",{className:"".concat(je?"text-scale-1100 line-through":""," text-sm"),children:["$",Ne("pitrDuration")]})]}),je&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:null===(b=R.pitrDuration)||void 0===b?void 0:b.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,W.mt)(R.pitrDuration).unit_amount/100).toFixed(2)]})]}),void 0!==(null===(g=z.customDomains)||void 0===g?void 0:g.id)&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"".concat(ve?"text-scale-1100 line-through":""," text-sm"),children:null===(y=z.customDomains)||void 0===y?void 0:y.name}),(0,l.jsxs)("p",{className:"".concat(ve?"text-scale-1100 line-through":""," text-sm"),children:["$",Ne("customDomains")]})]}),ve&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:null===(N=R.customDomains)||void 0===N?void 0:N.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",((0,W.mt)(R.customDomains).unit_amount/100).toFixed(2)]})]}),void 0!==z.supportPlan&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:null===(w=z.supportPlan)||void 0===w?void 0:w.name}),(0,l.jsxs)("p",{className:"text-sm",children:["$",Ne("supportPlan")]})]}),(0,l.jsxs)("div",{className:"!mt-4 space-y-4",children:[je&&(0,l.jsx)(xe.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,l.jsx)(oe.Z,{strokeWidth:2}),title:void 0===(null===(_=z.pitrDuration)||void 0===_?void 0:_.id)?"Enabling PITR":void 0===(null===(k=R.pitrDuration)||void 0===k?void 0:k.id)?"Disabling PITR":"Updating PITR duration",description:ie>=ne?"The days for which PITR is available for will only start at the time of enabling the add-on (e.g You will have access to the full ".concat(ie," days of PITR after ").concat(ie-ne," days from today)"):0===ie?"All available PITR back ups for your project will be removed and are non-recoverable":"Only the latest ".concat(ie," days of PITR from today will be retained (all backups that are later than ").concat(ie," days will be removed and are non-recoverable)")}),ue&&(0,l.jsx)(xe.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,l.jsx)(oe.Z,{strokeWidth:2}),title:"Changing your compute size",description:"It will take up to 2 minutes for changes to take place, and your project will be unavailable during that time"}),be&&(0,l.jsx)(xe.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,l.jsx)(oe.Z,{strokeWidth:2}),title:"Enabling spend cap",description:"Exceeding your plan's quota will result in service restrictions. With the spend cap disabled, you'll be charged for usage beyond the quota."})]})]}),(0,l.jsx)("div",{className:"w-full h-px bg-scale-600"}),(0,l.jsx)(pe,{totalMonthlyCost:se/100,subscriptionPreview:Z,isRefreshingPreview:S,isSpendCapEnabled:C}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-sm",children:"Select payment method"}),I?(0,l.jsxs)("div",{className:"flex items-center px-4 py-2 space-x-4 border rounded-md border-scale-700 bg-scale-400",children:[(0,l.jsx)(T.Z,{className:"animate-spin",size:14}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Retrieving payment methods"})]}):0===A.length?(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border border-dashed rounded-md bg-scale-100",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-scale-1100",children:[(0,l.jsx)(oe.Z,{size:16,strokeWidth:1.5}),(0,l.jsx)("p",{className:"text-sm",children:"No saved payment methods"})]}),(0,l.jsxs)(f.fC,{delayDuration:0,children:[(0,l.jsx)(f.xz,{children:(0,l.jsx)(h.z,{type:"default",disabled:!X,icon:(0,l.jsx)(ce.Z,{}),onClick:Y,children:"Add new"})}),!X&&(0,l.jsx)(f.h_,{children:(0,l.jsxs)(f.VY,{side:"bottom",children:[(0,l.jsx)(f.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","w-48 border border-scale-200 text-center"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to add new payment methods to this organization"})})]})})]})]}):(0,l.jsxs)(le.Z,{value:null===M||void 0===M?void 0:M.id,onChange:L,children:[A.map((function(e){var t="\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ".concat(e.card.last4);return(0,l.jsx)(le.Z.Option,{label:t,value:e.id,addOnBefore:function(){return(0,l.jsx)("img",{src:"".concat(o.GW,"/img/payment-methods/").concat(e.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"})},children:(0,l.jsx)("div",{children:t})},e.id)})),(0,l.jsxs)("div",{className:"flex items-center px-3 py-2 space-x-2 transition cursor-pointer group hover:bg-scale-500",onClick:Y,children:[(0,l.jsx)(de.Z,{size:16}),(0,l.jsx)("p",{className:"transition text-scale-1000 group-hover:text-scale-1200",children:"Add new payment method"})]})]})]}),(0,l.jsx)("div",{className:"self-center",children:V}),(0,l.jsx)("div",{className:"flex items-center justify-end",children:(0,l.jsxs)(f.fC,{delayDuration:0,children:[(0,l.jsx)(f.xz,{className:"w-full",children:(0,l.jsx)(h.z,{block:!0,type:"primary",size:"medium",loading:$,disabled:!H||te||$||I||!ge||!M,onClick:function(){return we()},children:"Confirm payment"})}),ge&&M&&H?null:(0,l.jsx)(f.h_,{children:(0,l.jsxs)(f.VY,{side:"bottom",children:[(0,l.jsx)(f.Eh,{className:"radix-tooltip-arrow"}),(0,l.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,l.jsx)("span",{className:"text-xs text-scale-1200",children:ge?M?H?te?"Subscription changes are currently disabled. Our engineers are working on a fix.":"":"Unable to update subscription as project is not active":"Please select a payment method":"No changes made to your subscription"})})]})})]})})]}),(0,l.jsx)(he,{visible:J,isChangingInstanceSize:ue,isDisablingPITR:je&&0===ie,isSubmitting:$,onCancel:function(){return ee(!1)},onConfirm:function(){return G()}})]})},ve=s(84954),be=s(32672),ge=function(e){var t=e.computeSizes,s=e.currentComputeSize,n=e.selectedComputeSize,i=e.onSelectOption,r=(0,b.UO)().ref,a=(0,v.P5)("disableProjectCreationAndUpdate");return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Compute add-ons"}),(0,l.jsx)(y.Z,{color:"green",children:"Optional"})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Choose the database instance size that best fits your needs"})]}),(0,l.jsx)(p(),{href:"https://supabase.com/docs/guides/platform/compute-add-ons",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(h.z,{type:"default",icon:(0,l.jsx)(R.Z,{strokeWidth:1.5}),children:"About compute add-ons"})})})]}),a?(0,l.jsx)(be.Z,{title:"Updating database add-ons is currently disabled"}):null!==s&&void 0!==s&&s.isLocked?(0,l.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h5",{className:"text-sm text-scale-1200",children:["Your project currently has the ",s.name," included"]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to change your compute size, do reach out to us"})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(p(),{href:"/support/new?ref=".concat(r,"&category=sales&subject=Disable%20custom%20domains%20"),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{children:"Contact us"})})})})]}):(0,l.jsxs)(ve.Z.Group,{type:"cards",className:"billing-compute-radio",children:[t.map((function(e){var t=(0,W.mt)(e);return(0,l.jsx)(ve.Z,{hidden:!0,align:"vertical",label:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("p",{children:e.name}),(null===s||void 0===s?void 0:s.id)===e.id&&(0,l.jsx)(y.Z,{color:"brand",children:"Current selection"})]}),description:e.metadata.features,value:e.id,optionalLabel:(0,l.jsxs)("div",{className:"w-[6rem] flex items-center justify-end",children:["$",t.unit_amount/100," / month"]}),checked:(null===n||void 0===n?void 0:n.id)===e.id,onChange:function(){return i(e)}},e.id||"micro-add-on")})),(0,l.jsx)(ve.Z,{hidden:!0,disabled:!0,align:"vertical",label:"Need a larger add on?",description:"Reach out to us - we've got you covered!",optionalLabel:(0,l.jsx)(p(),{href:"/support/new?ref=".concat(r,"&category=sales&subject=Enquiry%20for%20larger%20compute%20size"),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{children:"Contact us"})})})},"compute-size-cta")]})]})},ye=function(e){var t,s,n,i,r=e.pitrDurationOptions,a=e.currentPitrDuration,o=e.selectedPitrDuration,c=e.onSelectOption,d=(0,v.oR)().ui,u=(0,b.UO)().ref,x=(0,v.P5)("disableProjectCreationAndUpdate"),m=null!==(t=null===(s=d.selectedProject)||void 0===s?void 0:s.region)&&void 0!==t?t:"",f=(0,V.Gb)(null!==(n=null===(i=d.selectedProject)||void 0===i?void 0:i.dbVersion)&&void 0!==n?n:"")>=141044,j=["ap-northeast-2"].includes(m);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Point in time recovery (PITR)"}),(0,l.jsx)(y.Z,{color:"green",children:"Optional"})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Restore your database from a specific point in time"}),f&&!j&&!(null!==a&&void 0!==a&&a.isLocked)&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(xe.Z,{icon:(0,l.jsx)(oe.Z,{strokeWidth:2}),title:"Your project is required to minimally be on a Small Add-on to enable PITR",description:"This is to ensure that your project has enough resources to execute PITR successfully"})})]}),x?(0,l.jsx)(be.Z,{title:"Updating database add-ons is currently disabled"}):f?null!==a&&void 0!==a&&a.isLocked?(0,l.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h5",{className:"text-sm text-scale-1200",children:["Your project currently has ",a.name," included"]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to change your PITR duration, do reach out to us"})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(p(),{href:"/support/new?ref=".concat(u,"&category=sales&subject=Change%20PITR%20duration"),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{children:"Contact us"})})})})]}):j?(0,l.jsx)(xe.Z,{hideCollapse:!0,defaultVisibility:!0,title:"PITR is not available for your project's region (".concat(m,")"),description:(0,l.jsxs)("div",{className:"flex items-center justify-between m-1",children:[(0,l.jsx)("p",{className:"text-sm leading-normal",children:"Reach out to us if you're interested! We'll see what we can do for you."}),(0,l.jsx)(p(),{href:"/support/new?ref=".concat(u,"&category=sales&subject=Enquiry%20on%20PITR%20for%20project%20in%20").concat(m),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{type:"default",children:"Contact support"})})})]}),icon:(0,l.jsx)(oe.Z,{strokeWidth:2})}):(0,l.jsx)(ve.Z.Group,{type:"cards",className:"billing-compute-radio",children:r.map((function(e){var t=(0,W.mt)(e);return(0,l.jsx)(ve.Z,{hidden:!0,align:"vertical",label:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("p",{children:e.name}),(null===a||void 0===a?void 0:a.id)===e.id&&(0,l.jsx)(y.Z,{color:"brand",children:"Current selection"})]}),description:(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:e.metadata.features})}),value:e.id,optionalLabel:(0,l.jsxs)("div",{children:["$",t.unit_amount/100," / month"]}),checked:(null===o||void 0===o?void 0:o.id)===e.id,onChange:function(){return c(e)}},e.id||"pitr-disabled")}))}):(0,l.jsx)(xe.Z,{hideCollapse:!0,defaultVisibility:!0,title:"Your project is too old to be able to enable PITR for",description:(0,l.jsxs)("div",{className:"flex items-center justify-between m-1",children:[(0,l.jsx)("p",{className:"text-sm leading-normal",children:"Reach out to us if you're interested!"}),(0,l.jsx)(p(),{href:"/support/new?ref=".concat(u,"&category=sales&subject=Project%20too%20old%20old%20for%20PITR"),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{type:"default",children:"Contact support"})})})]}),icon:(0,l.jsx)(oe.Z,{strokeWidth:2})})]})},Ne=function(e){var t=e.options,s=e.currentOption,n=e.selectedOption,i=e.onSelectOption,r=(0,b.UO)().ref,a=(0,v.P5)("disableProjectCreationAndUpdate");return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h4",{className:"text-lg",children:"Custom Domains"}),(0,l.jsx)(y.Z,{color:"green",children:"Optional"})]}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"Present a branded experience to your users"})]}),a?(0,l.jsx)(be.Z,{title:"Updating database add-ons is currently disabled"}):null!==s&&void 0!==s&&s.isLocked?(0,l.jsxs)("div",{className:["flex items-center justify-between block w-full rounded px-4 py-3","border border-scale-600 bg-scale-100 dark:border-scale-500 dark:bg-scale-400"].join(" "),children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h5",{className:"text-sm text-scale-1200",children:"Your project currently has custom domains included"}),(0,l.jsx)("p",{className:"text-sm text-scale-1100",children:"If you would like to disable custom domains, do reach out to us"})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(p(),{href:"/support/new?ref=".concat(r,"&category=sales&subject=Disable%20custom%20domains%20"),children:(0,l.jsx)("a",{children:(0,l.jsx)(h.z,{children:"Contact us"})})})})]}):(0,l.jsx)(ve.Z.Group,{type:"cards",className:"billing-compute-radio",children:t.map((function(e){var t=(0,W.mt)(e);return(0,l.jsx)(ve.Z,{hidden:!0,align:"vertical",label:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("p",{children:e.name}),(null===s||void 0===s?void 0:s.id)===e.id&&(0,l.jsx)(y.Z,{color:"brand",children:"Current selection"})]}),description:(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:e.metadata.features})}),value:e.id,optionalLabel:(0,l.jsxs)("div",{children:["$",t.unit_amount/100," / month"]}),checked:(null===n||void 0===n?void 0:n.id)===e.id,onChange:function(){return i(e)}},e.id||"micro-add-on")}))})]})},we=s(41373),_e=s(44264),ke=s(3088),Pe=function(e){var t=e.returnUrl,s=e.onCancel,n=e.onConfirm,i=(0,v.oR)().ui,r=(0,_e.useStripe)(),a=(0,_e.useElements)(),o=(0,x.useState)(!1),c=o[0],d=o[1],u=function(){var e=(0,U.Z)(F().mark((function e(s){var o,c,l;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),r&&a){e.next=4;break}return console.error("Stripe.js has not loaded"),e.abrupt("return");case 4:return d(!0),void 0!==document&&document.body.classList.add("!pointer-events-auto"),e.next=8,r.confirmSetup({elements:a,redirect:"if_required",confirmParams:{return_url:t}});case 8:o=e.sent,(c=o.error)?(d(!1),i.setNotification({category:"error",message:null!==(l=null===c||void 0===c?void 0:c.message)&&void 0!==l?l:" Failed to save card details"})):(d(!1),n()),void 0!==document&&document.body.classList.remove("!pointer-events-auto");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsxs)("form",{onSubmit:u,children:[(0,l.jsx)(ie.C.Content,{children:(0,l.jsx)("div",{className:"transition ".concat(c?"pointer-events-none opacity-75":"opacity-100"),children:(0,l.jsx)(_e.PaymentElement,{})})}),(0,l.jsx)(ie.C.Separator,{}),(0,l.jsx)(ie.C.Content,{children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,l.jsx)(h.z,{block:!0,htmlType:"submit",type:"primary",loading:c,disabled:c,children:"Save"}),(0,l.jsx)(h.z,{htmlType:"button",type:"default",onClick:s,block:!0,disabled:c,children:"Cancel"})]})})]})},Se=(0,we.J)(o.Yw),Ce=function(e){var t=e.visible,s=e.returnUrl,n=e.onCancel,i=e.onConfirm,r=(0,v.oR)().ui,a=(0,x.useState)(),c=a[0],d=a[1],u=(0,ke.Y)(),p=(0,x.useState)(null),m=p[0],h=p[1],f=(0,x.useState)(null),j=f[0],b=f[1],g=(0,x.useCallback)((function(e){b(e)}),[]);(0,x.useEffect)((function(){var e=function(){var e=(0,U.Z)(F().mark((function e(){var s,n,i,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&j&&u)){e.next=16;break}if(n=m,e.prev=2,n){e.next=8;break}return e.next=6,j.execute({async:!0});case 6:r=e.sent,n=null!==(i=null===r||void 0===r?void 0:r.response)&&void 0!==i?i:null;case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return");case 13:return e.next=15,N(null!==(s=n)&&void 0!==s?s:void 0);case 15:y();case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,j,u]);var y=function(){h(null),null===j||void 0===j||j.resetCaptcha()},N=function(){var e=(0,U.Z)(F().mark((function e(t){var s,n,i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(void 0),i=null!==(s=null===(n=r.selectedOrganization)||void 0===n?void 0:n.slug)&&void 0!==s?s:"",e.next=4,(0,B.v_)("".concat(o.T5,"/organizations/").concat(i,"/payments/setup-intent"),{hcaptchaToken:t});case 4:if(!(a=e.sent).error){e.next=9;break}return e.abrupt("return",r.setNotification({category:"error",message:a.error.message,error:a.error}));case 9:d(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={clientSecret:c?c.client_secret:"",appearance:{theme:"night",labels:"floating"}},_=function(){return d(void 0),n()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(X.Z,{ref:g,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:function(e){h(e)},onClose:_,onExpire:function(){h(null)}}),(0,l.jsx)(ie.C,{hideFooter:!0,size:"medium",visible:t&&void 0!==c,header:"Add new payment method",onCancel:_,className:"PAYMENT",children:(0,l.jsx)("div",{className:"py-4 space-y-4",children:(0,l.jsx)(_e.Elements,{stripe:Se,options:w,children:(0,l.jsx)(Pe,{returnUrl:s,onCancel:_,onConfirm:function(){return d(void 0),i()}})})})})]})},Oe=s(37385),Te=s(65194),Ze=s(86673),De=s(47939),ze=s(55671),Ee=s(46123),Re=s(29239),Ae=function(e){var t=e.projectRef,s=(0,v.oR)().ui,n=(0,x.useState)(!1),i=n[0],r=n[1],a=(0,x.useState)(1),c=a[0],d=a[1],u=(0,x.useState)(0),f=u[0],j=u[1],b=(0,x.useState)([]),g=b[0],y=b[1],N=10*(c-1);(0,x.useEffect)((function(){var e=!1,n=function(){var n=(0,U.Z)(F().mark((function n(){var i;return F().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,B.YM)("".concat(o.T5,"/projects/").concat(t,"/invoices"),["X-Total-Count"]);case 2:i=n.sent,e||(i.error?s.setNotification({category:"error",message:i.error.message}):j(i["X-Total-Count"]));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return d(1),w(1),n(),function(){e=!0}}),[]);var w=function(){var e=(0,U.Z)(F().mark((function e(n){var i,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),d(n),i=10*(n-1),e.next=5,(0,B.U2)("".concat(o.T5,"/projects/").concat(t,"/invoices?offset=").concat(i,"&limit=").concat(10));case 5:(a=e.sent).error?s.setNotification({category:"error",message:a.error.message}):y(a),r(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,U.Z)(F().mark((function e(t){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.U2)("".concat(o.T5,"/stripe/invoices/").concat(t));case 2:null!==(n=e.sent)&&void 0!==n&&n.invoice_pdf?window.open(n.invoice_pdf,"_blank"):s.setNotification({category:"info",message:"Unable to fetch the selected invoice"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{className:"container my-4 max-w-4xl space-y-1",children:(0,l.jsx)(m.Z,{active:i,children:(0,l.jsx)(ze.Z,{head:[(0,l.jsx)(ze.Z.th,{},"header-icon"),(0,l.jsx)(ze.Z.th,{children:"Date"},"header-date"),(0,l.jsx)(ze.Z.th,{children:"Amount due"},"header-amount"),(0,l.jsx)(ze.Z.th,{children:"Invoice number"},"header-invoice"),(0,l.jsx)(ze.Z.th,{className:"flex items-center",children:"Status"},"header-invoice"),(0,l.jsx)(ze.Z.th,{className:"text-right"},"header-download")],body:0===g.length?(0,l.jsx)(ze.Z.tr,{children:(0,l.jsx)(ze.Z.td,{colSpan:5,className:"p-3 py-12 text-center",children:(0,l.jsx)("p",{className:"text-scale-1000",children:i?"Checking for invoices":"No invoices for this project yet"})})}):(0,l.jsxs)(l.Fragment,{children:[g.map((function(e){return(0,l.jsxs)(ze.Z.tr,{children:[(0,l.jsx)(ze.Z.td,{children:(0,l.jsx)(Oe.Z,{size:"xxl"})}),(0,l.jsx)(ze.Z.td,{children:(0,l.jsx)("p",{children:new Date(1e3*e.period_end).toLocaleString()})}),(0,l.jsx)(ze.Z.td,{children:(0,l.jsx)("p",{children:e.subtotal>=0?"$".concat(e.subtotal/100):"-$".concat(Math.abs(e.subtotal/100))})}),(0,l.jsx)(ze.Z.td,{children:(0,l.jsx)("p",{children:e.number})}),(0,l.jsx)(ze.Z.td,{children:(0,l.jsx)(Ee.Z,{status:e.status})}),(0,l.jsx)(ze.Z.td,{className:"align-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[[Re.U.UNCOLLECTIBLE,Re.U.OPEN].includes(e.status)&&(0,l.jsx)(p(),{href:"https://redirect.revops.supabase.com/pay-invoice/".concat(e.id),children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,l.jsx)(h.z,{children:"Pay Now"})})}),(0,l.jsx)(h.z,{type:"outline",icon:(0,l.jsx)(Te.Z,{size:16,strokeWidth:1.5}),onClick:function(){return _(e.id)}})]})})]},e.id)})),(0,l.jsx)(ze.Z.tr,{children:(0,l.jsx)(ze.Z.td,{colSpan:6,children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm opacity-50",children:["Showing ",N+1," to ",N+g.length," out of ",f," invoices"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.z,{icon:(0,l.jsx)(Ze.Z,{}),type:"default",size:"tiny",disabled:1===c,onClick:(0,U.Z)(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(c-1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}),(0,l.jsx)(h.z,{icon:(0,l.jsx)(De.Z,{}),type:"default",size:"tiny",disabled:10*c>=f,onClick:(0,U.Z)(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(c+1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))})]})]})})},"navigation")]})})})})}},32672:function(e,t,s){var n=s(33769),i=s(33114),r=s(24246);t.Z=function(e){var t=e.title;return(0,r.jsx)(i.Z,{icon:(0,r.jsx)(n.Z,{size:20,strokeWidth:1.5}),defaultVisibility:!0,hideCollapse:!0,title:t,description:(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("p",{className:"text-sm leading-normal",children:["Our engineers are currently working on a fix. You can follow updates on"," ",(0,r.jsx)("a",{className:"text-brand-900",href:"https://status.supabase.com/",children:"https://status.supabase.com/"})]})})})}},33114:function(e,t,s){var n=s(79894),i=s.n(n),r=s(27378),a=s(93942),o=s(78651),c=s(47314),l=s(65961),d=s(24246);t.Z=function(e){var t=e.icon,s=e.title,n=e.description,u=e.url,p=e.urlLabel,x=void 0===p?"Read more":p,m=e.defaultVisibility,h=void 0!==m&&m,f=e.hideCollapse,j=void 0!==f&&f,v=e.button,b=e.className,g=void 0===b?"":b,y=e.block,N=void 0!==y&&y,w=(0,r.useState)(h),_=w[0],k=w[1];return(0,d.jsx)("div",{className:"".concat(N?"block w-full":"","\n      block w-full rounded border border-scale-600 bg-scale-100 py-3 dark:border-scale-500 dark:bg-scale-400 ").concat(g),children:(0,d.jsxs)("div",{className:"flex flex-col px-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex w-full space-x-3 lg:items-start",children:[t&&(0,d.jsx)("span",{className:"text-scale-900",children:t}),(0,d.jsx)("div",{className:"flex-grow",children:(0,d.jsx)("h5",{className:"text-sm text-scale-1200",children:s})})]}),n&&!j?(0,d.jsx)("div",{className:"cursor-pointer text-scale-900",onClick:function(){return k(!_)},children:_?(0,d.jsx)(a.Z,{size:14,strokeWidth:1.5}):(0,d.jsx)(o.Z,{size:14,strokeWidth:1.5})}):null]}),(n||u||v)&&(0,d.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(_?"mt-3":""),style:{maxHeight:_?500:0},children:[(0,d.jsx)("div",{className:"text-scale-1100 text-sm",children:n}),u&&(0,d.jsx)(i(),{href:u,children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",className:"pt-2",children:(0,d.jsx)(c.z,{type:"default",icon:(0,d.jsx)(l.Z,{}),children:x})})}),v&&(0,d.jsx)("div",{children:v})]})]})})}},51896:function(e,t,s){s.d(t,{S2:function(){return j}});var n=s(90849),i=s(90089),r=s(55732),a=s(34707),o=s.n(a),c=s(36492),l=s(14919),d=s(20796),u=(s(27378),function(e){return["projects",e,"subscription"]}),p=["enabled"];function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(o().mark((function e(t,s){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(d.T5,"/projects/").concat(n,"/subscription"),{signal:s});case 5:if(!(i=e.sent).error){e.next=8;break}throw i.error;case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=e.projectRef,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.enabled,r=void 0===n||n,a=(0,i.Z)(s,p);return(0,c.a)(u(t),(function(e){var s=e.signal;return h({projectRef:t},s)}),m({enabled:r&&"undefined"!==typeof t},a))}},9150:function(e,t,s){var n=s(90849),i=(s(27378),s(5525)),r=s(12163),a=s(24246);function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}t.Z=function(e){return(0,a.jsx)(r.Z,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({icon:i.Z},e))}},29324:function(e,t,s){var n=s(90849),i=(s(27378),s(87066)),r=s(12163),a=s(24246);function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}t.Z=function(e){return(0,a.jsx)(r.Z,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){(0,n.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({icon:i.Z},e))}},84954:function(e,t,s){s.d(t,{Z:function(){return d}});var n=s(27378),i=s(44204),r=(0,n.createContext)({parentCallback:function(e){},type:"",name:"",activeId:"",parentSize:""}),a=s(54329),o=s(64355);var c=s(24246);function l(e){var t=e.id,s=void 0===t?function(){var e=46656*Math.random()|0,t=46656*Math.random()|0;return("00000"+e.toString(36)).slice(-3)+("00000"+t.toString(36)).slice(-3)}():t,n=e.disabled,i=e.value,l=e.label,d=e.afterLabel,u=e.beforeLabel,p=e.description,x=e.name,m=e.checked,h=e.onChange,f=e.onBlur,j=e.hidden,v=void 0!==j&&j,b=e.size,g=void 0===b?"medium":b,y=e.align,N=void 0===y?"vertical":y,w=e.optionalLabel,_=e.addOnBefore,k=(0,o.Z)("radio"),P=x,S=(0,a.G)().handleBlur;function C(e){S&&S(e),f&&f(e)}return(0,c.jsx)(r.Consumer,{children:function(e){var t=e.parentCallback,r=e.type,a=e.name,o=e.activeId,x=e.parentSize,f=s,j=a||P;g=x||g;var b=o===f||(!!m||!1!==m&&void 0),y=[k.variants[r].container.base,"list"===r&&!v&&k.variants[r].container.size[g]];function S(e){t&&t(e),h&&h(e)}return y.push(k.variants[r].base),y.push(k.variants[r].size[g]),b?y.push(k.variants[r].active):y.push(k.variants[r].inactive),n&&y.push(k.disabled),"list"!==r&&(v=!0),(0,c.jsxs)("label",{htmlFor:f,className:y.join(" "),children:[(0,c.jsx)("input",{id:f,name:j,type:"radio",className:[k.base,k.size[g],v&&k.hidden,k.variants[r].radio_offset,""].join(" "),checked:b,disabled:n,value:i||f,onChange:function(e){return S(e)},onBlur:C}),_,(0,c.jsxs)("div",{className:[k.label.base,k.label[g],k.variants[r].container.align[N]].join(" "),children:[u&&(0,c.jsx)("span",{className:[k.label_before.base,k.label_before[g]].join(" "),children:u}),(0,c.jsx)("span",{children:l}),d&&(0,c.jsx)("span",{className:[k.label_after.base,k.label_after[g]].join(" "),children:d}),p&&(0,c.jsx)("p",{className:[k.description.base,k.description[g]].join(" "),children:p})]}),w&&(0,c.jsx)("div",{className:[k.optionalLabel.base,k.optionalLabel[g]].join(" "),children:w})]})}})}l.Group=function(e){var t=e.id,s=e.layout,d=e.error,u=e.descriptionText,p=e.label,x=e.afterLabel,m=e.beforeLabel,h=e.labelOptional,f=e.children,j=e.className,v=e.type,b=void 0===v?"list":v,g=e.options,y=e.value,N=e.name,w=e.onChange,_=e.size,k=void 0===_?"medium":_,P=e.validation,S=e.groupClassName,C=e.labelsLayout,O=void 0===C?"vertical":C,T=(0,n.useState)(""),Z=T[0],D=T[1],z=(0,o.Z)("radio"),E=(0,a.G)(),R=E.formContextOnChange,A=E.values,U=E.errors,M=E.touched,F=E.fieldLevelValidation;return A&&!y&&(y=A[t||N]),d||(U&&!d&&(d=U[t||N]),d=M&&M[t||N]?d:void 0),(0,n.useEffect)((function(){P&&F(t,P(y))}),[]),(0,n.useEffect)((function(){D(y)}),[y]),(0,c.jsx)("fieldset",{name:N,className:j,children:(0,c.jsx)(i.l,{nonBoxInput:!0,label:p,afterLabel:x,beforeLabel:m,labelOptional:h,layout:s,id:t,error:d,descriptionText:u,size:k,labelLayout:O,children:(0,c.jsx)("div",{className:S||z.variants[b].group,children:(0,c.jsx)(r.Provider,{value:{parentCallback:function(e){w&&w(e),R&&R(e),P&&F(t,P(e.target.value)),D(e.target.id)},type:b,name:N,activeId:Z,parentSize:k},children:g?g.map((function(e){return(0,c.jsx)(l,{id:e.id,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,value:e.value,description:e.description})})):f})})})})};var d=l}}]);
//# sourceMappingURL=2382-0ce45c9f6a6af68e.js.map